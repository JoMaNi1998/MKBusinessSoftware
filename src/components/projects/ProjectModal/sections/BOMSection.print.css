/**
 * BOMSection Print Styles
 * Portal-basierter Druck für mehrseitigen A4 Druck
 *
 * Das Portal (#bom-print-portal) wird außerhalb von #root gerendert.
 * Beim Drucken wird #root versteckt und nur das Portal angezeigt.
 */

@media print {
  @page {
    size: A4 portrait;
    margin: 10mm;
  }

  /* ===== ALLES AUßER PORTAL VERSTECKEN ===== */
  body > *:not(#bom-print-portal) {
    display: none !important;
  }

  /* #root explizit verstecken */
  #root {
    display: none !important;
  }

  /* ===== PORTAL SICHTBAR MACHEN ===== */
  #bom-print-portal {
    display: block !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    background: white !important;
  }

  /* ===== GRUNDEINSTELLUNGEN ===== */
  html, body {
    background: white !important;
    height: auto !important;
    overflow: visible !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* ===== BOM PRINT PAGE ===== */
  .bom-print-page {
    font-family: system-ui, -apple-system, sans-serif;
    color: #111827;
    padding: 0;
    margin: 0;
    width: 100%;
  }

  /* ===== HEADER ===== */
  .bom-print-header {
    margin-bottom: 24px;
    border-bottom: 2px solid #374151;
    padding-bottom: 16px;
  }

  .bom-print-header h1 {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 16px 0;
    color: #111827;
  }

  .bom-header-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    font-size: 12px;
  }

  .bom-label {
    font-weight: 600;
    color: #6b7280;
    display: block;
    margin-bottom: 4px;
  }

  .bom-value {
    margin: 0;
    font-weight: 500;
    color: #111827;
  }

  .bom-sub {
    margin: 4px 0 0 0;
    font-size: 11px;
    color: #6b7280;
  }

  /* ===== KATEGORIEN ===== */
  .bom-category {
    margin-bottom: 20px;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .bom-category h3 {
    font-size: 14px;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: #374151;
    border-bottom: 1px solid #e5e7eb;
    padding-bottom: 4px;
  }

  /* ===== TABELLEN ===== */
  .bom-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 11px;
    /* WICHTIG: Tabelle darf über Seiten umbrechen */
    page-break-inside: auto;
  }

  /* Tabellen-Header auf JEDER Seite wiederholen */
  .bom-table thead {
    display: table-header-group;
  }

  .bom-table th {
    border: 1px solid #d1d5db;
    padding: 8px;
    text-align: left;
    background: #f3f4f6 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    font-weight: 600;
    font-size: 10px;
    text-transform: uppercase;
  }

  .bom-table td {
    border: 1px solid #d1d5db;
    padding: 8px;
    vertical-align: top;
  }

  /* WICHTIG: Zeilen nicht umbrechen */
  .bom-table tr {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .bom-table tbody {
    /* Body darf umbrechen */
    page-break-inside: auto;
  }

  .bom-material-name {
    font-weight: 500;
    color: #111827;
  }

  .bom-material-id {
    font-size: 10px;
    color: #6b7280;
  }

  /* ===== FOOTER ===== */
  .bom-print-footer {
    margin-top: 24px;
    padding-top: 12px;
    border-top: 1px solid #e5e7eb;
    text-align: center;
    font-size: 10px;
    color: #6b7280;
  }
}

/* ===== SCREEN: Portal verstecken ===== */
@media screen {
  #bom-print-portal {
    display: none !important;
  }
}
